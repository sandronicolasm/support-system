{% extends 'base.html.twig' %}

{% block body %}
<div class="container">
        {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
        {% endfor %}
        {% for message in app.flashes('error') %}
            <div class="alert alert-danger">{{ message }}</div>
        {% endfor %}
        <div class="form-holder mt-4 text-center">
            <h3 class="d-inline-block text-white">Enviar ticket de soporte</h3>

            <div class="form-content">
                <div class="form-items">
                    {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate' }}) }}

                        <div class="col-md-12 mt-3">
                            {{ form_widget(form.name, {'attr': {'class': 'mt-3', 'placeholder': 'Nombre'}}) }}
                           <div class="valid-feedback">Nombre ingresado válido</div>
                           <div class="invalid-feedback">El campo no puede dejarse vacio!</div>
                        </div>

                        <div class="col-md-12 mt-3">
                            {{ form_widget(form.email, {'attr': {'type': 'email', 'placeholder': 'Email', 'required': 'required'}}) }}
                             <div class="valid-feedback">Email ingresado válido</div>
                             <div class="invalid-feedback">El campo no es correcto!</div>
                        </div>
                        <div class="col-md-12 mt-3">
                            {{ form_widget(form.description, {'attr': {'type': 'text', 'placeholder': 'Descripción', 'required': 'required'}}) }}
                             <div class="valid-feedback">Descripción ingresada correctamente</div>
                             <div class="invalid-feedback">El campo no puede dejarse vacio!</div>
                        </div>

                       <div class="col-md-12 mt-3">
                        {{ form_widget(form.problemType, {'placeholder': 'Tipo de Problema', 'attr': {'required': 'required'}}) }}
                            <div class="valid-feedback">Tipo de Problema seleccionado correctamente</div>
                            <div class="invalid-feedback">Por favor selecciona una tipo de problema!</div>
                       </div>
                       <div class="col-md-12 mt-3">
                        {{ form_widget(form.urgency, {'placeholder': 'Urgencia', 'attr': {'required': 'required'}}) }}
                            <div class="valid-feedback">Urgencia seleccionada correctamente</div>
                            <div class="invalid-feedback">Por favor selecciona la urgencia!</div>
                       </div>
                        <div class="form-check mt-3">
                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                            <label class="form-check-label">Confirmo que los datos a enviar son correctos</label>
                            <div class="invalid-feedback">Por favor, confirma antes de enviar el ticket</div>
                        </div>
                        <div class="row">
                            <div class="form-button mt-3">
                                <button id="submit" type="submit" class="btn btn-primary">Enviar Ticket</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-outline-primary info-system" data-bs-toggle="modal" data-bs-target="#infoModal">
                            <i class="bi bi-question-circle"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Envía tu Consulta o Problema Rápidamente</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            Nuestro sistema de envío de tickets está diseñado para ayudarte de manera eficiente. Completa el formulario proporcionando los detalles de tu consulta o problema. Una vez enviado:
                <ul>
                    <li><strong>Creación del Ticket:</strong> Tu mensaje se registra automáticamente como un "ticket" en nuestro sistema. Piensa en esto como una nota digital que nos ayuda a organizar y priorizar tu solicitud.</li>
                    <li><strong>Asignación:</strong> Nuestro equipo revisará el ticket y lo asignará al especialista más adecuado para atender tu caso.</li>
                    <li><strong>Seguimiento:</strong> Recibirás actualizaciones por correo electrónico sobre el estado de tu ticket.</li>
                    <li><strong>Resolución:</strong> Te notificaremos tan pronto como resolvamos el problema o respondamos tu consulta.</li>
                </ul>
                <p>Si eres técnico, puedes incluir detalles como mensajes de error o pasos para reproducir el problema. Si no lo eres, simplemente describe lo que necesitas y nosotros nos encargamos del resto.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}